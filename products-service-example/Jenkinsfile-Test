def qa

def stages() {

    stage("Init") {
		def comandossh = "ssh -i /var/jenkins_home/keyssh-devops-curso.pem ec2-user@JenkinsDockerTF sudo "
        def branchName = env.BRANCH_NAME
		def gitCredentials = "CREDENTIAL_ID"
		def repoUrl = "https://github.com/devopsort/products-service-example.git"
					
		$qa = load "/var/jenkins_home/workspace/products-service-example_Test/products-service-example/script.groovy" 

        }   
		
    stage ("Checkout") {
        checkout scm
    }

    stage ("Build") {
		sh "\'$qa\'.deployAppTEST()"
    }

    stage ("Test") {
		echo 'testing the application...'
    }
	
	stage('Deploy in Test env') {  
		steps {
			sh "\'$qa\'.deployAppTEST()"
            }
        }
	}
return this